<?phpclass Qm_model extends MY_Model {	protected $_table = 'qm.qm_form';	protected $primary_key = 'qm_id';	function group_by_qm_title($tenant_id)	{		//$this->db->join('recordings', 'qm_form.qm_id = recordings.qm_id');		$this->db->group_by("qm_form.qm_title");		$this->db->where('qm_form.tenant_id', $tenant_id);		$this->db->order_by('qm_form.qm_title', 'asc');		return $this;	}	function sort_qm($tenant_id)	{		//$this->db->join('qm_level_rate', 'qm_form.qm_id = qm_level_rate.qm_id');		$this->db->order_by('qm_form.qm_title', 'asc');		$this->db->where('qm_form.tenant_id', $tenant_id);		return $this;	}	function join_qm()	{		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		$this->db->group_by("qm_form.qm_title");		return $this;	}	function join_edit_qm()	{		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		return $this;	}	function join_all()	{		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		$this->db->join('question', 'criteria.criteria_id = question.criteria_id');		$this->db->order_by('criteria.criteria_title', 'asc');		return $this;	}	function join_all_with_record($userid)	{		//$this->load->database('callcenter', TRUE);		$this->db->select('*');		$this->db->from('recordings');		$this->db->join('qm_form', 'recordings.unique_id = qm_form.qm_id');		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		$this->db->join('question', 'criteria.criteria_id = question.criteria_id');		$this->db->where('userid', $userid);		$this->db->where('recordings.unique_id = qm_form.qm_id');		$this->db->where('qm_form.criteria_id = criteria.criteria_id');		$this->db->where('criteria.criteria_id = question.criteria_id');		$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function join_all_for_preview($qm_title)	{/* 		$this->db->select('*');		$this->db->from('qm_form');		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		$this->db->join('question', 'criteria.criteria_id = question.criteria_id');		$this->db->where('qm_title', $qm_title);		//$this->db->group_by('criteria_title');		$this->db->order_by('criteria_title', 'asc');		$query = $this->db->get();		return $query->result(); *//* 		$this->db->select('*, GROUP_CONCAT(question.question_title)');		$this->db->from('qm_form');		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		$this->db->join('question', 'criteria.criteria_id = question.criteria_id');		$this->db->group_by('criteria.criteria_title');		$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result(); */		$this->db->select('*');		$this->db->from('qm_form');		$this->db->join('criteria', 'qm_form.criteria_id = criteria.criteria_id');		$this->db->join('question', 'criteria.criteria_id = question.criteria_id');		$this->db->where('qm_title', $qm_title);		//$this->db->group_by('criteria.criteria_title');		$this->db->order_by('criteria.criteria_title', 'asc');		//$this->db->group_by('question.criteria_id');		$query = $this->db->get();		return $query->result();	}	function get_form($qm_id)	{		$this->db->select('*');		$this->db->from('qm_form');		$this->db->join('qm_and_criteria', 'qm_form.qm_id = qm_and_criteria.qm_id');		$this->db->join('criteria', 'qm_and_criteria.criteria_id = criteria.criteria_id');		$this->db->join('criteria_and_question', 'criteria.criteria_id = criteria_and_question.criteria_id');		$this->db->join('question', 'criteria_and_question.question_id = question.question_id');		$this->db->where('qm_form.qm_id', $qm_id);		$this->db->where('qm_and_criteria.qm_id', $qm_id);		$this->db->where('criteria_and_question.qm_id', $qm_id);		$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function get_form2($qm_id)	{		$this->db->select('*');		$this->db->from('qm_form');		$this->db->join('qm_and_criteria', 'qm_form.qm_id = qm_and_criteria.qm_id');		$this->db->join('criteria', 'qm_and_criteria.criteria_id = criteria.criteria_id');		//$this->db->join('criteria_and_question', 'criteria.criteria_id = criteria_and_question.criteria_id');		//$this->db->join('question', 'criteria_and_question.question_id = question.question_id');		$this->db->where('qm_form.qm_id', $qm_id);		$this->db->where('qm_and_criteria.qm_id', $qm_id);		$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function get_form3($qm_id)	{		$this->db->select('*');		$this->db->from('qm_form');		///$this->db->join('qm_and_criteria', 'qm_form.qm_id = qm_and_criteria.qm_id');		//$this->db->join('criteria', 'qm_and_criteria.criteria_id = criteria.criteria_id');		//$this->db->join('criteria_and_question', 'criteria.criteria_id = criteria_and_question.criteria_id');		//$this->db->join('question', 'criteria_and_question.question_id = question.question_id');		$this->db->where('qm_form.qm_id', $qm_id);		//$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function get_no_criteria_score()	{		$this->db->where('criteria_score', 'n');		return $this;	}	function get_call_contacts_details()	{		//$db2 = $this->load->database('reportcallcenter', TRUE);		$this->load->database('reportcallcenter', TRUE);		$this->db->select('*');		$this->db->from('callcontactsdetails');		$query = $this->db->get();		return $query->result();	}	function report_criteria($tenant_id)	{		//$db2 = $this->load->database('reportcallcenter', TRUE);		$this->load->database('qm', TRUE);		$this->db->select('criteria.criteria_id,criteria.criteria_title,qm_form.qm_id');		$this->db->from('qm_form');		$this->db->join('qm_and_criteria', 'qm_form.qm_id = qm_and_criteria.qm_id');		$this->db->join('criteria', 'qm_and_criteria.criteria_id = criteria.criteria_id');		$this->db->where('qm_form.tenant_id', $tenant_id);		$query = $this->db->get();		return $query->result();	}}?>