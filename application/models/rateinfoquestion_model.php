<?phpclass Rateinfoquestion_model extends MY_Model {	protected $_table = 'qm.rate_info_question';	//protected $primary_key = 'record_id';	function join_criteria($record_id)	{		//$this->load->database('callcenter', TRUE);		$this->db->select('*,SUM(qm.rate_info_question.question_score) as total_question_score,SUM(qm.question.question_top_score) as question_top_score,COUNT(qm.rate_info_question.question_id) as total_question');		$this->db->from('qm.rate_info_question');		$this->db->join('qm.rate_info_criteria', 'rate_info_question.criteria_id = rate_info_criteria.criteria_id');		$this->db->join('qm.question', 'rate_info_question.question_id = question.question_id');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_criteria.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$this->db->group_by("rate_info_question.criteria_id");		$this->db->order_by('rate_info_criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function join_criteria_question($record_id)	{		$this->db->select('*');		$this->db->from('qm.rate_info_question');		$this->db->join('qm.rate_info_criteria', 'rate_info_question.criteria_id = rate_info_criteria.criteria_id');		$this->db->join('qm.question', 'rate_info_question.question_id = question.question_id');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_criteria.record_id', $record_id);		$this->db->order_by('qm.rate_info_criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function sort_criteria($record_id)	{		$this->db->join('qm.rate_info_criteria', 'rate_info_question.criteria_id = rate_info_criteria.criteria_id');		//$this->db->join('question', 'rate_info_question.question_id = question.question_id');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_criteria.record_id', $record_id);		//$this->db->order_by('rate_info_criteria.criteria_title', 'asc');		$this->db->group_by("qm.rate_info_criteria.criteria_title");		return $this;	}	function sum_question_point($record_id)	{		$this->db->select('SUM(qm.rate_info_question.question_score) as total_question_score');		$this->db->from('qm.rate_info_question');		$this->db->join('qm.rate_info_criteria', 'rate_info_question.criteria_id = rate_info_criteria.criteria_id');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_criteria.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$this->db->group_by("qm.rate_info_criteria.criteria_title");		$this->db->order_by('qm.rate_info_criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}	function get_major_only($record_id)	{		$this->db->select('SUM(qm.rate_info_question.question_major) as total_major_score');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$query = $this->db->get();		return $query->result();	}		function get_minor_only($record_id)	{		$this->db->select('SUM(qm.rate_info_question.question_minor) as total_minor_score');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$query = $this->db->get();		return $query->result();	}		function get_fatal_only($record_id)	{		$this->db->select('qm.rate_info_question.question_fatal');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$this->db->where('qm.rate_info_question.question_fatal !=', 0);		$query = $this->db->get();		return $query->result();	}		function check_major_na($record_id)	{		$this->db->select('question_major,question_minor,COUNT(qm.rate_info_question.question_score) as total_major_na');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_major =', 9911);		//$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}		function check_minor_na($record_id)	{		$this->db->select('question_major,question_minor,COUNT(qm.rate_info_question.question_score) as total_minor_na');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_minor =', 9911);		//$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}		function get_cb_only($record_id)	{		$this->db->select('SUM(qm.rate_info_question.question_cb) as total_cb_score');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$query = $this->db->get();		return $query->result();	}		function get_cc_only($record_id)	{		$this->db->select('SUM(qm.rate_info_question.question_cc) as total_cc_score');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$query = $this->db->get();		return $query->result();	}		function get_nc_only($record_id)	{		$this->db->select('SUM(qm.rate_info_question.question_nc) as total_nc_score');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_score !=', 9911);		$query = $this->db->get();		return $query->result();	}		function check_cb_na($record_id)	{		$this->db->select('question_cb,question_nc,question_cc,COUNT(qm.rate_info_question.question_score) as total_cb_na');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_cb =', 9911);		//$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}		function check_cc_na($record_id)	{		$this->db->select('question_cb,question_nc,question_cc,COUNT(qm.rate_info_question.question_score) as total_cc_na');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_cc =', 9911);		//$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}		function check_nc_na($record_id)	{		$this->db->select('question_cb,question_nc,question_cc,COUNT(qm.rate_info_question.question_score) as total_nc_na');		$this->db->from('qm.rate_info_question');		$this->db->where('qm.rate_info_question.record_id', $record_id);		$this->db->where('qm.rate_info_question.question_nc =', 9911);		//$this->db->order_by('criteria.criteria_title', 'asc');		$query = $this->db->get();		return $query->result();	}}?>